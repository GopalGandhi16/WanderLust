<% layout("/layout/boilerplate") %>
<body>
    <div class="row">
        <div class="col-8 offset-3">
    <h1><%=list.title.toUpperCase()%></h1>
    </div>
    
    <div class="card card-listing" >
        <div class="col-4 offset-3">
  <img src="<%=list.image%>" class="card-img-top show-img" alt="listing image">
  </div>
<div class="col-6 offset-3 bodyContent">
  <div class="card-body">
    <div class="backgroundMain ">
    <h5 class="card-title"><%=list.title%></h5>
    <p class="card-text">
      <p class="fw-bold">Owned by : <%=list.owner.username%></p>
         <%=list.description%> <br>
          &#8377; <%=list.price.toLocaleString("en-IN")%> /- <br>
            <%=list.location%> <br>
         <%=list.country%> <br>
    </p>
    </div>
    </div>
    <div class="btns mt-3">
    <a href="/listings/<%= list._id %>/edit" class="btn btn-primary">Edit</a>
     <form action="/listings/<%= list._id %>/delete?_method=DELETE" method="post">
                <button class="edit btn btn-danger">Delete</button>
            </form>
  </div>
  </div>
  </div>
  <hr>
  <div class="reviews col-8 offset-3 mt-2 mb-3 ">
    <h3 class="p-0 m-0"><u>Provide your feedback</u> </h3>
    <form action="/listings/<%=list._id%>/reviews" method="post" novalidate class="needs-validation">
    <label for="Rating form-label " class="mt-3 mb-3">Rating:</label>
    <input type="range" class="form-range form-control" min="1" max="5"id="Rating"  name="review[Rating]" value="3">
    <label for="Comments form-label" class="mt-3 mb-3">Comment:</label>
      <textarea name="review[comment]" id="Comments" class="form-control" cols="20" rows="7" required></textarea>
          <div class="invalid-feedback">Please Enter proper feedback</div>
      <button class="btn btn-outline-dark mt-2 mb-2 offset-5 mb-1" >Submit</button>
</form>
  </div>
  <hr>

  <div class="row offset-3 mt-2 mb-3 col-10" >
      <h1>All Ratings</h1>
    <% for(let review of list.reviews){ %>
    <div class="card m-3 col-4 " style="background-color: rgb(225, 219, 255);" >
      <div class="card-body ps-3">
        <div ><p class="card-text mt-2"><%=review.comment%></p></div>
         <p class="card-title text-end"><b>by-<%=review.author.username%> </b></p>
         <div class="stars m-2">
         <% for(let i=1;i<=review.Rating ;i++){%>
             <i class="fa-solid fa-star" style="color: gold; display: inline;"></i>
                 <% } %>
                 </div>
                 <form action="/listings/<%=list._id%>/reviews/<%=review._id%>/delete?_method=DELETE" method="post">
                  <button class="btn btn-danger mb-2 mb-1">Delete</button>
                 </form>

      </div>
    </div>
    <% } %>
  </div> 
</div>

           
</body>
</html>